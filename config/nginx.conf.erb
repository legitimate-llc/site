daemon off;
worker_processes auto;
events {
use epoll;
accept_mutex on;
worker_connections 512;
}
http {
gzip on;
gzip_comp_level 6;
gzip_min_length 512;
gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;
gzip_vary on;
gzip_proxied any;
server_tokens off;
access_log logs/access.log;
error_log stderr error;
include mime.types;
default_type application/octet-stream;
sendfile on;
# Must read the body in 5 seconds.
client_body_timeout 5;
server {
listen 14876 reuseport;
charset UTF-8;
port_in_redirect off;
keepalive_timeout 5;
root public_html/; # Ensure this is pointing to your static assets directory
# Serve static files and handle 404 within this location block
location / {
try_files $uri $uri/ =404;
}
# Redirect all non-www traffic to www. This remains unchanged.
if ($host != www.legitimate.us) {
return 301 $http_x_forwarded_proto://www.legitimate.us$request_uri;
}
}
}
